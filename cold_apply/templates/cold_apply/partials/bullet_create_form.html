{% load form_helpers %}

<form action="{% url 'cold_apply:create_bullet' participant.id %}"
      method="post"
      hx-target="this"
      hx-swap="outerHTML"
      hx-post="{% url 'cold_apply:create_bullet' participant.id %}"
      class="border py-2 px-3 rounded max-w-lg"
      x-data="{auto_generate: false }"
      x-init="auto_generate = $el['auto_generate'].value;"
      hx-indicator=".htmx-indicator"
      >
      
      {% csrf_token %}
      <div class="my-3">
        {% include 'components/form_input.html' with field=form.auto_generate input_attrs="x-model:auto_generate" %}
      </div>
      <div class="mb-3" x-show="auto_generate == 'False'">
        {% include 'components/form_input.html' with field=form.text %}
      </div>
      <div class="mb-3" x-show="auto_generate == 'True'">
          {% include 'components/form_input.html' with field=form.quantity %}
      </div>
      

      <div class="my-3">
        {% include 'components/form_input.html' with field=form.experience %}
      </div>
      
      <div class="my-3">
        {% include 'components/form_input.html' with field=form.skills %}
      </div>
      {% if form.non_field_errors %}

      <div class="bg-red-100 border border-red-500 text-red-900 px-4 py-3 rounded my-3 text-sm">
        {{form.non_field_errors}}
      </div>
      {% endif %}
    <div class="d-flex align-items-center">
      <button  class="btn btn-primary me-2" type="submit">Add Bullet</button>
      <button class="btn btn-outline-primary me-3" type="button" hx-on="click: this.closest('form').remove()">Cancel</button>
      <div class="spinner-border text-primary htmx-indicator" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
</form>